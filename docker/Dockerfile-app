FROM registry.access.redhat.com/ubi8/python-39

LABEL maintainer="Red Hat - EXD"

WORKDIR /src

COPY . .

RUN pip install "uvicorn[standard]" gunicorn
RUN pip install .

EXPOSE 8000

CMD ["gunicorn", "--worker-class", "uvicorn.workers.UvicornWorker", "--config", "/src/conf/gunicorn.conf","-w 4", "ubi_manifest.app.factory:create_app()"]
